(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5837cc7c"],{"230c":function(e,t,a){"use strict";var r=a("b49f"),n=a.n(r);n.a},3663:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"product"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleCreate}},[e._v("\n    新增电影\n    "),a("i",{staticClass:"el-icon-upload el-icon--right"})]),a("div",{staticStyle:{width:"500px",margin:"20px auto"}},[a("el-input",{staticStyle:{width:"300px","margin-right":"10px"},attrs:{placeholder:"请输入您要搜索的关键字"},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.handleFind}},[e._v("\n      搜索\n      "),a("i",{staticClass:"el-icon-search el-icon--left"})])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"1200px",margin:"0 auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"电影名称",align:"center","min-width":"120"}}),a("el-table-column",{attrs:{prop:"year",label:"年份",align:"center","min-width":"120"}}),a("el-table-column",{attrs:{prop:"desc",label:" 电影描述",align:"center","min-width":"180"}}),a("el-table-column",{attrs:{prop:"createAt",label:"创建时间",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.createAt.substring(0,10)))])]}}])}),a("el-table-column",{attrs:{prop:"updateAt",label:"更新时间",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.updateAt.substring(0,10)))])]}}])}),a("el-table-column",{attrs:{label:"操作","min-width":"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.query.pageNum,limit:e.query.pageSize},on:{"update:page":function(t){return e.$set(e.query,"pageNum",t)},"update:limit":function(t){return e.$set(e.query,"pageSize",t)},pagination:function(t){return e.getData()}}})],1),a("div",[a("el-dialog",{attrs:{title:"create"===e.type?"新增电影":"编辑电影",visible:e.dialogVisible,width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{model:e.fromData,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"电影名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入电影名称"},model:{value:e.fromData.name,callback:function(t){e.$set(e.fromData,"name",t)},expression:"fromData.name"}})],1),a("el-form-item",{attrs:{label:"出品年份",prop:"year"}},[a("el-input",{attrs:{placeholder:"请输入电影年份"},model:{value:e.fromData.year,callback:function(t){e.$set(e.fromData,"year",t)},expression:"fromData.year"}})],1),a("el-form-item",{attrs:{label:"电影描述",prop:"desc"}},[a("el-input",{attrs:{placeholder:"请输入电影描述"},model:{value:e.fromData.desc,callback:function(t){e.$set(e.fromData,"desc",t)},expression:"fromData.desc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSure}},[e._v("确 定")])],1)],1)],1)],1)},n=[],i=a("be94"),s=(a("96cf"),a("1da1")),o=(a("cadf"),a("551c"),a("097d"),a("333d")),l={name:"",year:"",desc:""},c={components:{Pagination:o["a"]},data:function(){return{loading:!1,dialogVisible:!1,type:"",fromData:{},list:[],keyWord:"",total:0,query:{pageNum:1,pageSize:10},rules:{name:[{required:!0,message:"请输入电影名称",trigger:"blur"},{min:3,max:30,message:"长度在 3 到 30 个字符",trigger:"blur"}],year:[{required:!0,message:"请输入电影年份",trigger:"blur"}],desc:[{required:!0,message:"请输入产品描述",trigger:"blur"}]}}},created:function(){this.getData()},methods:{getData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.axios({url:"http://127.0.0.1:8081/api/v1/movie",method:"GET",params:Object(i["a"])({},this.query,{name:this.keyWord})});case 3:t=e.sent,this.loading=!1,this.list=t.data.data,this.total=t.data.total,console.log(t);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleFind:function(){this.query.pageNum=1,this.getData()},handleCreate:function(){var e=this;this.dialogVisible=!0,this.type="create",this.fromData=Object(i["a"])({},l),this.$nextTick(function(){e.$refs["ruleForm"].clearValidate()})},handleEdit:function(e,t){var a=this;console.log(e,t),this.dialogVisible=!0,this.type="edit",this.fromData=Object(i["a"])({},t,{id:t.id}),this.$nextTick(function(){a.$refs["ruleForm"].clearValidate()})},handleSure:function(){var e=this;this.$refs["ruleForm"].validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(a){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:if("create"!==e.type){t.next=8;break}return t.next=5,e.axios({url:"http://127.0.0.1:8081/api/v1/movie",method:"POST",data:Object(i["a"])({},e.fromData)});case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,e.axios({url:"http://127.0.0.1:8081/api/v1/movie/".concat(e.fromData.id),method:"PUT",data:Object(i["a"])({},e.fromData)});case 10:r=t.sent;case 11:if(200===r.status){t.next=14;break}return e.$message={type:"error",message:r.data.msg},t.abrupt("return",!1);case 14:e.dialogVisible=!1,e.getData(),e.$message({type:"success",message:"create"===e.type?"创建成功":"更新成功"});case 17:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该选项, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,a.axios({url:"http://127.0.0.1:8081/api/v1/movie/".concat(t.id),method:"DELETE"});case 2:if(r=e.sent,200===r.status){e.next=5;break}return e.abrupt("return",a.$message.error(r.data.msg||"删除失败"));case 5:a.$message({type:"success",message:"删除成功!"}),a.getData();case 7:case"end":return e.stop()}},e,this)}))).catch(function(){console.log("取消删除")})}}},u=c,d=(a("230c"),a("2877")),p=Object(d["a"])(u,r,n,!1,null,"1b6e5986",null);p.options.__file="index.vue";t["default"]=p.exports},b49f:function(e,t,a){}}]);